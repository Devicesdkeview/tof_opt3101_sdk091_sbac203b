\hypertarget{class_o_p_t3101phase_ambient_coff}{}\section{O\+P\+T3101phase\+Ambient\+Coff Class Reference}
\label{class_o_p_t3101phase_ambient_coff}\index{O\+P\+T3101phase\+Ambient\+Coff@{O\+P\+T3101phase\+Ambient\+Coff}}


Class that holds ambient phase coeffecient related registers and values.  




{\ttfamily \#include $<$O\+P\+T3101\+Design\+Coefficients.\+h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_a926e3a0dcadac3172c34982bbf8e1bbe}{calculate\+Coff}} (uint16\+\_\+t freq\+Counter)
\begin{DoxyCompactList}\small\item\em Calculates the register setttings for the phase ambient coeffecient Calculates \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_a7b9be6815f936c44329b53f5f57b3d6c}{O\+P\+T3101phase\+Ambient\+Coff\+::coff\+Reg}} and \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_ac2976af69df6837bd7bc1881b87f7188}{O\+P\+T3101phase\+Ambient\+Coff\+::common\+Scale}} based on \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_a0174483b15a3819cf8b30fcad00f7dda}{O\+P\+T3101phase\+Ambient\+Coff\+::coff}}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_aa7ff470b91c005c7e6c589f70ad5f5b8}{store\+To\+File}} (char $\ast$file\+Name)
\begin{DoxyCompactList}\small\item\em saves phase ambient coff values to file This methods saves the phase ambient coff values to a non-\/volatile memory. Storage/\+Restoration to/from non-\/volatile memory is important for factory calibration \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_a9a0cc8986689fd6bb3c2fdc13f3182d6}{load\+From\+File}} (char $\ast$file\+Name)
\begin{DoxyCompactList}\small\item\em load phase ambient coff values from file This methods loads the phase ambient coff values to a non-\/volatile memory. Storage/\+Restoration to/from non-\/volatile memory is important for factory calibration \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
double \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_a0174483b15a3819cf8b30fcad00f7dda}{coff}} \mbox{[}4\mbox{]}
\begin{DoxyCompactList}\small\item\em Coeffecients stored in floating point precision. Since there are 4 sections the \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_a0174483b15a3819cf8b30fcad00f7dda}{O\+P\+T3101phase\+Ambient\+Coff\+::coff}} is array of 4 elements. Units for this is \mbox{\hyperlink{class_o_p_t3101frame_data_a4d07c723715856ea9652b3d672d01191}{O\+P\+T3101frame\+Data\+::phase}} codes per unit \mbox{\hyperlink{class_o_p_t3101frame_data_a901d8630d15b79b558e7d7c5a9d08cc7}{O\+P\+T3101frame\+Data\+::ambient}} codes. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_a7b9be6815f936c44329b53f5f57b3d6c}{coff\+Reg}} \mbox{[}4\mbox{]}
\begin{DoxyCompactList}\small\item\em Coeffecients value of \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_a0174483b15a3819cf8b30fcad00f7dda}{O\+P\+T3101phase\+Ambient\+Coff\+::coff}} represented as 8 bit register values calculated by \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_a926e3a0dcadac3172c34982bbf8e1bbe}{O\+P\+T3101phase\+Ambient\+Coff\+::calculate\+Coff}}. \end{DoxyCompactList}\item 
uint16\+\_\+t \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_ae784da8b9f3bf0af13e2ebaff6c980fb}{splits\+Reg}} \mbox{[}3\mbox{]}
\begin{DoxyCompactList}\small\item\em Register entries for the split point for the P\+WL. Since there are 4 sections where are 3 split points to be set. Units for this is \mbox{\hyperlink{class_o_p_t3101frame_data_a901d8630d15b79b558e7d7c5a9d08cc7}{O\+P\+T3101frame\+Data\+::ambient}} codes. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_ac2976af69df6837bd7bc1881b87f7188}{common\+Scale}}
\begin{DoxyCompactList}\small\item\em Since there are 4 \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_a0174483b15a3819cf8b30fcad00f7dda}{O\+P\+T3101phase\+Ambient\+Coff\+::coff}} to represent them as 8 bit register values a common scaling factor is required. This is calculated by method \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_a926e3a0dcadac3172c34982bbf8e1bbe}{O\+P\+T3101phase\+Ambient\+Coff\+::calculate\+Coff}}. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Class that holds ambient phase coeffecient related registers and values. 

This is a class container that can hold phase offset ambient coeffecients and related registers. Photodiodes has a phenomenon where the phase delay of modulated current generated by photodiode is dependent on the amount of ambient light falling on the photodiode. The effect observed on the system is that the phase reported by the system will be dependent on the amount of ambient light of the enrivonement. ~\newline
 \mbox{\hyperlink{namespace_o_p_t3101}{O\+P\+T3101}} has compensation block for the same, which needs coeffecients to be be programmed. \mbox{\hyperlink{namespace_o_p_t3101}{O\+P\+T3101}} has a look up table based correction since the phenomenon in non-\/linear. The look-\/up table is a 4 way split P\+WL correction with 4 independent coeffecients. The P\+WL correlation is between ambient A\+DC output and phase measured~\newline
 This class has members to contain the coeffecients and the split points. 

\subsection{Member Function Documentation}
\mbox{\Hypertarget{class_o_p_t3101phase_ambient_coff_a926e3a0dcadac3172c34982bbf8e1bbe}\label{class_o_p_t3101phase_ambient_coff_a926e3a0dcadac3172c34982bbf8e1bbe}} 
\index{O\+P\+T3101phase\+Ambient\+Coff@{O\+P\+T3101phase\+Ambient\+Coff}!calculate\+Coff@{calculate\+Coff}}
\index{calculate\+Coff@{calculate\+Coff}!O\+P\+T3101phase\+Ambient\+Coff@{O\+P\+T3101phase\+Ambient\+Coff}}
\subsubsection{\texorpdfstring{calculate\+Coff()}{calculateCoff()}}
{\footnotesize\ttfamily void O\+P\+T3101phase\+Ambient\+Coff\+::calculate\+Coff (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{freq\+Counter }\end{DoxyParamCaption})}



Calculates the register setttings for the phase ambient coeffecient Calculates \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_a7b9be6815f936c44329b53f5f57b3d6c}{O\+P\+T3101phase\+Ambient\+Coff\+::coff\+Reg}} and \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_ac2976af69df6837bd7bc1881b87f7188}{O\+P\+T3101phase\+Ambient\+Coff\+::common\+Scale}} based on \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_a0174483b15a3819cf8b30fcad00f7dda}{O\+P\+T3101phase\+Ambient\+Coff\+::coff}}. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em freq\+Counter;} & freq\+Counter is the count which represents the frequency from the Frequency correction block. This is read from register \mbox{\hyperlink{class_o_p_t3101_1_1registers_a0d343738560c0bc418f34b458735a811}{O\+P\+T3101\+::registers\+::freq\+\_\+count\+\_\+read\+\_\+reg}} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Nothing; 
\end{DoxyReturn}
{\bfseries Algorithm of the method is as follows}


\begin{DoxyItemize}
\item Identifies max of absolute of \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_a0174483b15a3819cf8b30fcad00f7dda}{O\+P\+T3101phase\+Ambient\+Coff\+::coff}} values ~\newline
~\newline
~\newline

\item scales the max coeffecient with input frequency\+Count ~\newline
~\newline

\item Finds a \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_ac2976af69df6837bd7bc1881b87f7188}{O\+P\+T3101phase\+Ambient\+Coff\+::common\+Scale}} which can fit the \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_a0174483b15a3819cf8b30fcad00f7dda}{O\+P\+T3101phase\+Ambient\+Coff\+::coff}} to 8 bit registers
\item Finds \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_a7b9be6815f936c44329b53f5f57b3d6c}{O\+P\+T3101phase\+Ambient\+Coff\+::coff\+Reg}} values (8 bit register values) based on \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_a0174483b15a3819cf8b30fcad00f7dda}{O\+P\+T3101phase\+Ambient\+Coff\+::coff}} and \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_ac2976af69df6837bd7bc1881b87f7188}{O\+P\+T3101phase\+Ambient\+Coff\+::common\+Scale}} 
\end{DoxyItemize}\mbox{\Hypertarget{class_o_p_t3101phase_ambient_coff_a9a0cc8986689fd6bb3c2fdc13f3182d6}\label{class_o_p_t3101phase_ambient_coff_a9a0cc8986689fd6bb3c2fdc13f3182d6}} 
\index{O\+P\+T3101phase\+Ambient\+Coff@{O\+P\+T3101phase\+Ambient\+Coff}!load\+From\+File@{load\+From\+File}}
\index{load\+From\+File@{load\+From\+File}!O\+P\+T3101phase\+Ambient\+Coff@{O\+P\+T3101phase\+Ambient\+Coff}}
\subsubsection{\texorpdfstring{load\+From\+File()}{loadFromFile()}}
{\footnotesize\ttfamily void O\+P\+T3101phase\+Ambient\+Coff\+::load\+From\+File (\begin{DoxyParamCaption}\item[{char $\ast$}]{file\+Name }\end{DoxyParamCaption})}



load phase ambient coff values from file This methods loads the phase ambient coff values to a non-\/volatile memory. Storage/\+Restoration to/from non-\/volatile memory is important for factory calibration 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em file\+Name;} & Path and name of the file from where to load \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Nothing; 
\end{DoxyReturn}
\mbox{\Hypertarget{class_o_p_t3101phase_ambient_coff_aa7ff470b91c005c7e6c589f70ad5f5b8}\label{class_o_p_t3101phase_ambient_coff_aa7ff470b91c005c7e6c589f70ad5f5b8}} 
\index{O\+P\+T3101phase\+Ambient\+Coff@{O\+P\+T3101phase\+Ambient\+Coff}!store\+To\+File@{store\+To\+File}}
\index{store\+To\+File@{store\+To\+File}!O\+P\+T3101phase\+Ambient\+Coff@{O\+P\+T3101phase\+Ambient\+Coff}}
\subsubsection{\texorpdfstring{store\+To\+File()}{storeToFile()}}
{\footnotesize\ttfamily void O\+P\+T3101phase\+Ambient\+Coff\+::store\+To\+File (\begin{DoxyParamCaption}\item[{char $\ast$}]{file\+Name }\end{DoxyParamCaption})}



saves phase ambient coff values to file This methods saves the phase ambient coff values to a non-\/volatile memory. Storage/\+Restoration to/from non-\/volatile memory is important for factory calibration 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em file\+Name;} & Path and name of the file to store \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Nothing; 
\end{DoxyReturn}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{class_o_p_t3101phase_ambient_coff_a0174483b15a3819cf8b30fcad00f7dda}\label{class_o_p_t3101phase_ambient_coff_a0174483b15a3819cf8b30fcad00f7dda}} 
\index{O\+P\+T3101phase\+Ambient\+Coff@{O\+P\+T3101phase\+Ambient\+Coff}!coff@{coff}}
\index{coff@{coff}!O\+P\+T3101phase\+Ambient\+Coff@{O\+P\+T3101phase\+Ambient\+Coff}}
\subsubsection{\texorpdfstring{coff}{coff}}
{\footnotesize\ttfamily double O\+P\+T3101phase\+Ambient\+Coff\+::coff\mbox{[}4\mbox{]}}



Coeffecients stored in floating point precision. Since there are 4 sections the \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_a0174483b15a3819cf8b30fcad00f7dda}{O\+P\+T3101phase\+Ambient\+Coff\+::coff}} is array of 4 elements. Units for this is \mbox{\hyperlink{class_o_p_t3101frame_data_a4d07c723715856ea9652b3d672d01191}{O\+P\+T3101frame\+Data\+::phase}} codes per unit \mbox{\hyperlink{class_o_p_t3101frame_data_a901d8630d15b79b558e7d7c5a9d08cc7}{O\+P\+T3101frame\+Data\+::ambient}} codes. 

\mbox{\Hypertarget{class_o_p_t3101phase_ambient_coff_a7b9be6815f936c44329b53f5f57b3d6c}\label{class_o_p_t3101phase_ambient_coff_a7b9be6815f936c44329b53f5f57b3d6c}} 
\index{O\+P\+T3101phase\+Ambient\+Coff@{O\+P\+T3101phase\+Ambient\+Coff}!coff\+Reg@{coff\+Reg}}
\index{coff\+Reg@{coff\+Reg}!O\+P\+T3101phase\+Ambient\+Coff@{O\+P\+T3101phase\+Ambient\+Coff}}
\subsubsection{\texorpdfstring{coff\+Reg}{coffReg}}
{\footnotesize\ttfamily uint8\+\_\+t O\+P\+T3101phase\+Ambient\+Coff\+::coff\+Reg\mbox{[}4\mbox{]}}



Coeffecients value of \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_a0174483b15a3819cf8b30fcad00f7dda}{O\+P\+T3101phase\+Ambient\+Coff\+::coff}} represented as 8 bit register values calculated by \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_a926e3a0dcadac3172c34982bbf8e1bbe}{O\+P\+T3101phase\+Ambient\+Coff\+::calculate\+Coff}}. 

\mbox{\Hypertarget{class_o_p_t3101phase_ambient_coff_ac2976af69df6837bd7bc1881b87f7188}\label{class_o_p_t3101phase_ambient_coff_ac2976af69df6837bd7bc1881b87f7188}} 
\index{O\+P\+T3101phase\+Ambient\+Coff@{O\+P\+T3101phase\+Ambient\+Coff}!common\+Scale@{common\+Scale}}
\index{common\+Scale@{common\+Scale}!O\+P\+T3101phase\+Ambient\+Coff@{O\+P\+T3101phase\+Ambient\+Coff}}
\subsubsection{\texorpdfstring{common\+Scale}{commonScale}}
{\footnotesize\ttfamily uint8\+\_\+t O\+P\+T3101phase\+Ambient\+Coff\+::common\+Scale}



Since there are 4 \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_a0174483b15a3819cf8b30fcad00f7dda}{O\+P\+T3101phase\+Ambient\+Coff\+::coff}} to represent them as 8 bit register values a common scaling factor is required. This is calculated by method \mbox{\hyperlink{class_o_p_t3101phase_ambient_coff_a926e3a0dcadac3172c34982bbf8e1bbe}{O\+P\+T3101phase\+Ambient\+Coff\+::calculate\+Coff}}. 

\mbox{\Hypertarget{class_o_p_t3101phase_ambient_coff_ae784da8b9f3bf0af13e2ebaff6c980fb}\label{class_o_p_t3101phase_ambient_coff_ae784da8b9f3bf0af13e2ebaff6c980fb}} 
\index{O\+P\+T3101phase\+Ambient\+Coff@{O\+P\+T3101phase\+Ambient\+Coff}!splits\+Reg@{splits\+Reg}}
\index{splits\+Reg@{splits\+Reg}!O\+P\+T3101phase\+Ambient\+Coff@{O\+P\+T3101phase\+Ambient\+Coff}}
\subsubsection{\texorpdfstring{splits\+Reg}{splitsReg}}
{\footnotesize\ttfamily uint16\+\_\+t O\+P\+T3101phase\+Ambient\+Coff\+::splits\+Reg\mbox{[}3\mbox{]}}



Register entries for the split point for the P\+WL. Since there are 4 sections where are 3 split points to be set. Units for this is \mbox{\hyperlink{class_o_p_t3101frame_data_a901d8630d15b79b558e7d7c5a9d08cc7}{O\+P\+T3101frame\+Data\+::ambient}} codes. 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
C\+:/folders/d/scripts/cpp/\+O\+P\+T3101\+S\+D\+K/\+O\+P\+T3101\+S\+D\+K/\+O\+P\+T3101\+S\+D\+K/\mbox{\hyperlink{_o_p_t3101_design_coefficients_8h}{O\+P\+T3101\+Design\+Coefficients.\+h}}\item 
C\+:/folders/d/scripts/cpp/\+O\+P\+T3101\+S\+D\+K/\+O\+P\+T3101\+S\+D\+K/\+O\+P\+T3101\+S\+D\+K/\mbox{\hyperlink{_o_p_t3101_design_coefficients_8cpp}{O\+P\+T3101\+Design\+Coefficients.\+cpp}}\end{DoxyCompactItemize}
